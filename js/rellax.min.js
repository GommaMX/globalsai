(function(a,b){'function'==typeof define&&define.amd?define([],b):'object'==typeof module&&module.exports?module.exports=b():a.Rellax=b()})(this,function(){var a=function(b,c){'use strict';var d=Object.create(a.prototype),e=0,f=0,g=[],h=!1,j=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},k=window.transformProp||function(){var t=document.createElement('div');if(null==t.style.transform){var u=['Webkit','Moz','ms'];for(var v in u)if(void 0!==t.style[u[v]+'Transform'])return u[v]+'Transform'}return'transform'}(),l=function(t,u,v){return t<=u?u:t>=v?v:t};d.options={speed:-2,center:!1,round:!0},c&&Object.keys(c).forEach(function(t){d.options[t]=c[t]}),d.options.speed=l(d.options.speed,-10,10),b||(b='.rellax');var m=document.querySelectorAll(b);if(0<m.length)d.elems=m;else throw new Error('The elements you\'re trying to select don\'t exist.');var o=function(t){var u=t.dataset.rellaxPercentage,v=t.dataset.rellaxSpeed,w=u||d.options.center?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0,x=w+t.getBoundingClientRect().top,y=t.clientHeight||t.offsetHeight||t.scrollHeight,z=u?u:(w-x+f)/(y+f);d.options.center&&(z=0.5);var A=v?l(v,-10,10):d.options.speed;(u||d.options.center)&&(A=l(v||d.options.speed,-5,5));var B=q(z,A),C=t.style.cssText,D='';if(0<=C.indexOf('transform')){var E=C.indexOf('transform'),F=C.slice(E),G=F.indexOf(';');D=G?' '+F.slice(11,G).replace(/\s/g,''):' '+F.slice(11).replace(/\s/g,'')}return{base:B,top:x,height:y,speed:A,style:C,transform:D}},p=function(){var t=e;return e=void 0===window.pageYOffset?(document.documentElement||document.body.parentNode||document.body).scrollTop:window.pageYOffset,t!=e},q=function(t,u){var v=u*(100*(1-t));return d.options.round?Math.round(v):v},r=function(){p()&&!1==h&&s(),j(r)},s=function(){for(var t=0;t<d.elems.length;t++){var u=(e-g[t].top+f)/(g[t].height+f),v=q(u,g[t].speed)-g[t].base,w='translate3d(0,'+v+'px,0) '+g[t].transform;d.elems[t].style[k]=w}};return d.destroy=function(){for(var t=0;t<d.elems.length;t++)d.elems[t].style.cssText=g[t].style;h=!0},function(){f=window.innerHeight,p();for(var u,t=0;t<d.elems.length;t++)u=o(d.elems[t]),g.push(u);window.addEventListener('resize',function(){s()}),r(),s()}(),d};return a});